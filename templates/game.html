<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Puissance 4test</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  {{define "cellClass"}}
    {{if eq . "X"}}X{{else if eq . "O"}}O{{else}}empty{{end}}
  {{end}}

  {{if .Winner}}
  {{if or (eq .Winner .Player1) (eq .Winner .Player2)}}
    <div class="winner-banner">🎉 Victoire de {{.Winner}} ! 🎉</div>
  {{else}}
    <div class="draw-banner">🤝 Match nul ! La grille est pleine.</div>
  {{end}}
{{else}}
  <h1>Tour de : {{if eq .Turn 0}}{{.Player1}}{{else}}{{.Player2}}{{end}}</h1>
{{end}}


  <table class="grid">
    <tr>
      {{range $j := seq 0 (sub (len (index .Grid 0)) 1)}}
        <td>
          <form method="POST" action="/play">
            <input type="hidden" name="column" value="{{$j}}">
            <button class="cell-button" type="submit">↓</button>
          </form>
        </td>
      {{end}}
    </tr>
    {{range $i, $row := .Grid}}
      <tr>
        {{range $j, $cell := $row}}
          <td class="cell {{template "cellClass" $cell}}"></td>
        {{end}}
      </tr>
    {{end}}
  </table>
  <form action ="/" method="Get">
    <button type="submit" class="back-button">Retour</button>
  </form>
</body>
</html>
